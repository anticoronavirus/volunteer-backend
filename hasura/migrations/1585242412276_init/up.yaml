- args:
    functions:
    - function:
        name: shift_selector
        schema: public
    - function:
        name: shift_selector2
        schema: public
    - configuration:
        session_argument: hasura_session
      function:
        name: unseen_hint
        schema: public
    remote_schemas:
    - definition:
        forward_client_headers: true
        timeout_seconds: 60
        url: http://auth:8000/
      name: auth
    tables:
    - insert_permissions:
      - permission:
          check:
            _exists:
              _table:
                name: hospital
                schema: public
              _where:
                hospital_coordinators:
                  coordinator:
                    uid:
                      _eq: X-Hasura-User-Id
          columns:
          - comment
          - volunteer_id
        role: volunteer
      object_relationships:
      - name: volunteer
        using:
          foreign_key_constraint_on: volunteer_id
      select_permissions:
      - permission:
          columns:
          - comment
          - created_at
          - updated_at
          - uid
          - volunteer_id
          filter:
            _exists:
              _table:
                name: hospital
                schema: public
              _where:
                hospital_coordinators:
                  coordinator:
                    uid:
                      _eq: X-Hasura-User-Id
        role: volunteer
      table:
        name: blacklist
        schema: public
    - select_permissions:
      - permission:
          columns:
          - coophone
          - uid
          - name
          - shortname
          - phone
          - address
          filter: {}
        role: volunteer
      - permission:
          columns:
          - coophone
          - uid
          - name
          - shortname
          - phone
          - address
          filter: {}
        role: voyeur
      table:
        name: coordinator_hospitals_view
        schema: public
    - array_relationships:
      - name: seen_hints
        using:
          foreign_key_constraint_on:
            column: hint_id
            table:
              name: seen_hint
              schema: public
      select_permissions:
      - permission:
          columns:
          - uid
          - text
          - name
          filter:
            _not:
              seen_hints:
                user_id:
                  _eq: X-Hasura-User-Id
        role: volunteer
      - permission:
          columns:
          - uid
          - text
          - name
          filter:
            _exists:
              _table:
                name: me
                schema: public
              _where: {}
        role: voyeur
      table:
        name: hint
        schema: public
    - array_relationships:
      - name: coordinators
        using:
          foreign_key_constraint_on:
            column: hospital_id
            table:
              name: volunteer
              schema: public
      - name: hospital_coordinators
        using:
          foreign_key_constraint_on:
            column: hospital_id
            table:
              name: hospital_coordinator
              schema: public
      - name: periods
        using:
          foreign_key_constraint_on:
            column: hospital_id
            table:
              name: period
              schema: public
      - name: special_shifts
        using:
          foreign_key_constraint_on:
            column: hospital_id
            table:
              name: special_shift
              schema: public
      object_relationships:
      - name: coordinator
        using:
          manual_configuration:
            column_mapping:
              phone: phone
            remote_table:
              name: volunteer
              schema: public
      select_permissions:
      - permission:
          columns:
          - uid
          - name
          - shortname
          - phone
          - address
          filter: {}
        role: volunteer
      - permission:
          columns:
          - uid
          - address
          - name
          - phone
          - shortname
          filter: {}
        role: voyeur
      table:
        name: hospital
        schema: public
    - configuration:
        custom_column_names:
          coophone: coophone
        custom_root_fields: {}
      object_relationships:
      - name: coordinator
        using:
          manual_configuration:
            column_mapping:
              coophone: phone
            remote_table:
              name: volunteer
              schema: public
      - name: hospital
        using:
          foreign_key_constraint_on: hospital_id
      table:
        name: hospital_coordinator
        schema: public
    - table:
        name: hospital_coordinators_view
        schema: public
    - object_relationships:
      - name: managedHospital
        using:
          manual_configuration:
            column_mapping:
              phone: coophone
            remote_table:
              name: coordinator_hospitals_view
              schema: public
      select_permissions:
      - permission:
          columns:
          - comment
          - created_at
          - email
          - fname
          - hospital_id
          - is_hatching
          - lname
          - mname
          - password
          - phone
          - profession
          - role
          - uid
          - updated_at
          filter:
            uid:
              _eq: X-Hasura-User-Id
        role: volunteer
      - permission:
          columns:
          - comment
          - created_at
          - email
          - fname
          - hospital_id
          - is_hatching
          - lname
          - mname
          - password
          - phone
          - profession
          - role
          - uid
          - updated_at
          filter:
            uid:
              _is_null: true
        role: voyeur
      table:
        name: me
        schema: public
    - delete_permissions:
      - permission:
          filter:
            hospital:
              coordinators:
                uid:
                  _eq: X-Hasura-User-Id
        role: volunteer
      insert_permissions:
      - permission:
          check:
            hospital:
              coordinators:
                uid:
                  _eq: X-Hasura-User-Id
          columns:
          - demand
          - end
          - start
          - hospital_id
        role: volunteer
      object_relationships:
      - name: hospital
        using:
          foreign_key_constraint_on: hospital_id
      select_permissions:
      - permission:
          columns:
          - demand
          - end
          - hospital_id
          - start
          - uid
          filter: {}
        role: volunteer
      - permission:
          columns:
          - demand
          - end
          - hospital_id
          - start
          - uid
          filter: {}
        role: voyeur
      table:
        name: period
        schema: public
    - select_permissions:
      - permission:
          columns:
          - name
          filter: {}
        role: voyeur
      table:
        name: profession
        schema: public
    - table:
        name: role
        schema: public
    - insert_permissions:
      - permission:
          check:
            user_id:
              _eq: X-Hasura-User-Id
          columns:
          - hint_id
          - user_id
        role: volunteer
      object_relationships:
      - name: hint
        using:
          foreign_key_constraint_on: hint_id
      - name: volunteer
        using:
          foreign_key_constraint_on: user_id
      table:
        name: seen_hint
        schema: public
    - array_relationships:
      - name: shiftRequests
        using:
          manual_configuration:
            column_mapping:
              date: date
              end: end
              start: start
            remote_table:
              name: volunteer_shift
              schema: public
      select_permissions:
      - permission:
          columns:
          - date
          - start
          - end
          - hospitalscount
          - demand
          - placesavailable
          filter: {}
        role: volunteer
      - permission:
          columns:
          - date
          - demand
          - hospitalscount
          - placesavailable
          - end
          - start
          filter: {}
        role: voyeur
      table:
        name: shifts
        schema: public
    - object_relationships:
      - name: hospital
        using:
          foreign_key_constraint_on: hospital_id
      select_permissions:
      - permission:
          columns:
          - date
          - demand
          - end
          - hospital_id
          - start
          filter: {}
        role: voyeur
      table:
        name: special_shift
        schema: public
    - array_relationships:
      - name: blacklists
        using:
          foreign_key_constraint_on:
            column: volunteer_id
            table:
              name: blacklist
              schema: public
      - name: seen_hints
        using:
          foreign_key_constraint_on:
            column: user_id
            table:
              name: seen_hint
              schema: public
      - name: volunteer_shifts
        using:
          foreign_key_constraint_on:
            column: volunteer_id
            table:
              name: volunteer_shift
              schema: public
      object_relationships:
      - name: hospital
        using:
          foreign_key_constraint_on: hospital_id
      - name: managedHospital
        using:
          manual_configuration:
            column_mapping:
              phone: coophone
            remote_table:
              name: coordinator_hospitals_view
              schema: public
      select_permissions:
      - permission:
          columns:
          - comment
          - email
          - fname
          - hospital_id
          - is_hatching
          - lname
          - mname
          - password
          - phone
          - profession
          - role
          - uid
          filter:
            _or:
            - uid:
                _eq: X-Hasura-User-Id
            - volunteer_shifts:
                hospital:
                  hospital_coordinators:
                    coordinator:
                      uid:
                        _eq: X-Hasura-User-Id
        role: volunteer
      - permission:
          columns:
          - fname
          - lname
          - mname
          - phone
          - role
          - uid
          filter: {}
        role: voyeur
      table:
        name: volunteer
        schema: public
      update_permissions:
      - permission:
          columns:
          - comment
          - email
          - fname
          - hospital_id
          - is_hatching
          - lname
          - mname
          - password
          - phone
          - profession
          - role
          - uid
          filter:
            _or:
            - uid:
                _eq: X-Hasura-User-Id
            - volunteer_shifts:
                hospital:
                  hospital_coordinators:
                    coordinator:
                      uid:
                        _eq: X-Hasura-User-Id
        role: volunteer
    - delete_permissions:
      - permission:
          filter:
            _or:
            - volunteer_id:
                _eq: X-Hasura-User-Id
            - hospital:
                coordinators:
                  uid:
                    _eq: X-Hasura-User-Id
        role: volunteer
      insert_permissions:
      - permission:
          check:
            _and:
            - _or:
              - volunteer_id:
                  _eq: X-Hasura-User-Id
              - hospital:
                  hospital_coordinators:
                    coordinator:
                      uid:
                        _eq: X-Hasura-User-Id
            - _not:
                _exists:
                  _table:
                    name: blacklist
                    schema: public
                  _where:
                    volunteer_id:
                      _eq: X-Hasura-User-Id
          columns:
          - confirmed
          - date
          - end
          - start
          - hospital_id
          - uid
          - volunteer_id
        role: volunteer
      object_relationships:
      - name: hospital
        using:
          manual_configuration:
            column_mapping:
              hospital_id: uid
            remote_table:
              name: hospital
              schema: public
      - name: volunteer
        using:
          foreign_key_constraint_on: volunteer_id
      select_permissions:
      - permission:
          columns:
          - confirmed
          - date
          - end
          - start
          - hospital_id
          - uid
          - volunteer_id
          filter:
            _and:
            - _or:
              - volunteer_id:
                  _eq: X-Hasura-User-Id
              - hospital:
                  hospital_coordinators:
                    coordinator:
                      uid:
                        _eq: X-Hasura-User-Id
            - _not:
                _exists:
                  _table:
                    name: blacklist
                    schema: public
                  _where:
                    volunteer_id:
                      _eq: X-Hasura-User-Id
        role: volunteer
      - permission:
          columns:
          - confirmed
          - date
          - created_at
          - updated_at
          - end
          - start
          - hospital_id
          - uid
          - volunteer_id
          filter:
            volunteer_id:
              _eq: X-Hasura-User-Id
        role: voyeur
      table:
        name: volunteer_shift
        schema: public
      update_permissions:
      - permission:
          columns:
          - confirmed
          filter:
            hospital:
              hospital_coordinators:
                coordinator:
                  uid:
                    _eq: X-Hasura-User-Id
        role: volunteer
    - array_relationships:
      - name: shiftRequests
        using:
          manual_configuration:
            column_mapping:
              date: date
              end: end
              start: start
            remote_table:
              name: volunteer_shift
              schema: public
      select_permissions:
      - permission:
          columns:
          - date
          - start
          - end
          - hospitalscount
          - demand
          - placesavailable
          - uid
          filter: {}
        role: volunteer
      - permission:
          columns:
          - date
          - demand
          - hospitalscount
          - placesavailable
          - end
          - start
          - uid
          filter: {}
        role: voyeur
      table:
        name: vshift
        schema: public
    version: 2
  type: replace_metadata
